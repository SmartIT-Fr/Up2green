<?xml version="1.0" encoding="UTF-8"?>
<database name="default" namespace="Up2green\EducationBundle\Model" defaultIdMethod="native">

    <table name="school">
        <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="VARCHAR" size="255" required="true" primaryString="true" />
        <column name="address" type="VARCHAR" size="255" required="true" />

        <behavior name="sluggable" />
        <behavior name="sortable" />
        <behavior name="geocodable">
            <parameter name="geocode_address" value="true" />
            <parameter name="address_columns" value="address" />
            <parameter name="geocoder_api_key" value="APIKEY" />
            <parameter name="geocoder_provider" value="\Geocoder\Provider\GoogleMapsProvider" />
        </behavior>
    </table>

    <table name="classroom">
        <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="VARCHAR" size="255" required="true" primaryString="true" />
        <column name="year" type="VARCHAR" size="255" required="true" />
        <column name="picture" type="VARCHAR" size="255" />
        <column name="description" type="VARCHAR" size="1024" />

        <column name="school_id" type="INTEGER" required="true" />
        <column name="user_id" type="INTEGER" required="true" />

        <foreign-key foreignTable="school" onDelete="CASCADE" skipSql="true">
            <reference local="school_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="fos_user" onDelete="CASCADE" skipSql="true">
            <reference local="user_id" foreign="id"/>
        </foreign-key>

        <behavior name="sluggable" />
        <behavior name="sortable" />
    </table>

    <table name="classroom_picture">
        <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="student" type="VARCHAR" size="255" required="true" />
        <column name="picture" type="VARCHAR" size="255" required="true" />
        <column name="classroom_id" type="INTEGER" size="255" required="true" />
        <column name="program_id" type="INTEGER" size="255" required="true" />

        <foreign-key foreignTable="classroom" onDelete="CASCADE" skipSql="true">
            <reference local="classroom_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="program" onDelete="CASCADE" skipSql="true">
            <reference local="program_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="waiting_list">
        <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="first_name" type="VARCHAR" size="255" required="true" />
        <column name="last_name" type="VARCHAR" size="255" required="true" />
        <column name="email" type="VARCHAR" size="255" required="true" />
        <column name="phone_number" type="VARCHAR" size="255" required="true" />
        <column name="kits_number" type="INTEGER" size="255" required="true" />
        <column name="address_id" type="INTEGER" size="255" required="true" />

        <foreign-key foreignTable="address" onDelete="CASCADE" skipSql="true">
            <reference local="address_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="donation">
        <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="order_id" type="INTEGER" required="true" />

        <column name="name" type="VARCHAR" size="255" required="true" />
        <column name="email" type="VARCHAR" size="255" required="true" />
        <column name="url" type="VARCHAR" size="255" required="false" />

        <column name="is_anonymous" type="BOOLEAN" required="false" />
        <column name="comment_public" type="VARCHAR" size="255" required="false" />
        <column name="comment_private" type="VARCHAR" size="255" required="false" />

        <foreign-key foreignTable="order">
            <reference local="order_id" foreign="id" />
        </foreign-key>

        <behavior name="delegate">
            <parameter name="to" value="order" />
        </behavior>
    </table>

</database>
